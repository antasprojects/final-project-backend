<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Location Image Viewer</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        text-align: center;
    }
    .image-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
    .image-container img {
        margin: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 5px;
        width: 200px;
        height: auto;
    }
    #fetch-images {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>
<body>
<h1>Location Image Viewer</h1>
<p>Enter the ID of a location to fetch images:</p>
<input type="number" id="location-id" placeholder="Enter location ID" style="padding: 10px; font-size: 16px;">
<button id="fetch-images">Fetch Images</button>

<div id="images" class="image-container"></div>

<script>
    document.getElementById('fetch-images').addEventListener('click', function() {
        const locationId = document.getElementById('location-id').value;

        if (!locationId) {
            alert('Please enter a location ID.');
            return;
        }

        // Fetch image URLs from your backend using the location ID
        fetch(`http://localhost:3000/locations/images/${locationId}`)
            .then(response => response.json())
            .then(data => {
                const imagesContainer = document.getElementById('images');
                imagesContainer.innerHTML = ''; // Clear previous images

                // Display images using the proxy endpoint
                data.forEach(url => {
                    const proxyUrl = `http://localhost:3000/api/proxy-image?url=${encodeURIComponent(url)}`;
                    const img = document.createElement('img');
                    img.src = proxyUrl;
                    img.alt = 'Image';
                    imagesContainer.appendChild(img);
                });
            })
            .catch(error => {
                console.error('Error fetching images:', error);
            });
    });
</script>
</body>
</html>